
# 网络协议理解 

{docsify-updated}

## HTTP

#### 网络分层方式？

七层模型：应用层、表示层、会话层 、传输层、网络层 、数据链路层、物理层
TCP/IP四层模型：应用层、传输层、网络层、网络接口层

#### HTTP报文格式？

HTTP协议是基于ASCII文本的协议。分为请求报文和响应报文。实例如下：

请求报文：
```
POST /path/to/page HTTP/1.1
Host: www.example.com
Content-Type: application/x-www-form-urlencoded
Connection: Keep-AliveUser-agent: Mozilla/5.0.

name=Tom
```

响应报文：
```
HTTP/1.1 200 OK
Connection：close
Server:Apache/2.2.3(CentOS)
Date: Sat, 31 Dec 2005 23:59:59 GMT
Content-Type: text/html
Content-Length: 122

age=18
```

`Range:`` Content-Range:``Content-Length:` 三个字段实现断点续传

报文头部换行末尾使用的`CRLF`二进制表示 `0d0a`。


#### 常见状态码有哪些？

- 1xx 需要后续操作
- 2xx 请求成功
- 3xx 重定向
- 4xx 客户端错误
- 5xx 服务器错误

#### GET与POST的区别？

语法上GET是将参数拼接到URL后面。POST是将参数拼接后放到body体中。一般浏览器对URL的长度有限制。

语义上GET是获取数据是安全的、幂等的、可缓存的。POST是提交数据，是不安全的、非幂等的、不可缓存的。

使用上GET可以放到浏览器的收藏夹中，便于用户保存，浏览器地址栏可直接查看参数内容。一些敏感数据不宜使用GET。

#### HTTP 2.0 与 1.1 的区别？


## TCP

#### 建立及断开过程？

- 建立过程使用三次握手：
客户端发送SYN=1， ACK=0，序列号=Client  的报文；
服务器返回SYN=1，ACK=1，序列号=Server， 确认号= Client + 1  的报文；
客户端返回SYN=0, ACK=1，序列号=Client + 1，确认号= Server+1 的报文；

（记忆方式：前两次SYN=1，之后的报文就跟数据传输时是一样的了。区别是建立链接时确认号是加一，而传输数据是加数据长度。握手过程中两端相关状态的变化实在难记。太容易忘。如果不是做相关开发，还是不要记忆了。）

断开过程使用四次挥手：

1. 客户端发送FIN=1  的报文；
2. 服务端对客户端FIN报文确认报文；
3. 服务端发送FIN=1报文；
4. 客户端发送服务端FIN报文的确认报文；

断开过程中2和3步骤通常会合并成一个报文。

追问：

1. 为什么是三次握手而不是两次？

两次握手会可能导致已失效的连接请求报文段突然又传送到了服务端产生错误，四次握手又太浪 费资源。


2. 为什么断开连接需要四次，而建立连接只要三次就够了。

服务端的FIN和ACK 需要分开发，并不是像三次握手中那样，SYN可以和ACK 同步发，所以 就需要四次挥手；实际使用中很多时候断开连接也是三次完成的。

3. 在四次挥手中，客户端为什么在TIME_WAIT 后必须等待2MSL 时间呢？

为了保证客户端发送的最后一个ACK报文段能够到达服务端。

## UDP



## HTTPS

1. HTTPS 实现原理？
2. 一个HTTPS网络请求经过了哪些过程？

## DNS



## 网络优化

1. 谈谈网络层如何优化？
2. 如何保证网络安全？
2. 找一个常见的点问问怎么处理？比如第一次请求比较慢？？？



